<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>제주도 여행지 상세</title>
  <style>
    body {
      display: flex;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    #map {
      width: 80%;
      height: 100vh;
    }
    aside {
      width: 20%;
      background-color: #f0f0f0;
      padding: 20px;
      box-sizing: border-box;
    }
    aside h4 {
      margin-top: 0;
    }
    ul {
      list-style: none;
      padding: 20px;
      margin-top: 100px;
    }
    li {
      margin: 15px 0;
    }
    button {
      padding: 10px 10px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      text-align: center;
    }
    .gotoallmap {
      border: 1px solid black;
      text-align: center;
      margin: 10% 10%;
      width: 80%;
      height: 200px;
    }
    .dropbtn {
        background-color: #4CAF50;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
    }


    .dropdown {
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }

    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {background-color: #f1f1f1}

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .dropdown:hover .dropbtn {
      background-color: #3e8e41;
    }
  </style>

  <!-- ✅ 구글 지도 API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAbMER9WUqCWwa5elJS2gL8cptzje82DQ0"></script>
</head>
<body>
  
  <!-- ✅ 지도 영역 -->
  <div id="map"></div>

  <!-- ✅ 우측 사이드 -->
  <aside>
    <div class="gotoallmap">
      <h4>해당 여행지가 <br> 마음에 들지 않으신가요?</h5>
      <div><button onclick="goToAllMap()">전체 지도 보기</button></div>
    </div>
    <ul>
      <li>
        <div class="dropdown">
          <button>음식점</button>
          <div class="dropdown-content">
              <a href="food1.html">음식점 추천</a>
              <a href="hotel1.html">후기</a>
          </div>
        </div>
      </li>
      <li>
        <div class="dropdown">
          <button>숙소</button>
          <div class="dropdown-content">
              <a href="food1.html">숙소추천</a>
              <a href="hotel1.html">후기</a>
          </div>
        </div>
      </li>
      <li>
        <div class="dropdown">
          <button>관광지</button>
          <div class="dropdown-content">
              <a href="food1.html">관광지 추천</a>
              <a href="hotel1.html">후기</a>
          </div>
        </div>
      </li>
    </ul>
    
  </aside>

  <script>
    let map;

    function initMap() {
      // 제주도 좌표
      const jeju = { lat: 33.4996, lng: 126.5312 };
      const locations =[
        {place:"도토리키친",lat:33.5105,lng:126.5131},{place:"제주시새우리",lat:33.5099,lng:126.5245},
        {place:"여행자게스트하우스",lat:33.5099,lng:126.5245},{place:"한화리조트제주",lat:33.5140,lng:126.6220},
        {place:"오설록티뮤지엄",lat:33.3059,lng:126.2896},{place:"우도",lat:33.5053,lng:126.9558}
      ]
      
      // 지도 생성
      map = new google.maps.Map(document.getElementById("map"), {
        center: jeju,
        zoom: 12
      });

      // 마커
      new google.maps.Marker({
        position: jeju,
        map: map,
        title: "제주도"
      });
      var foodicon = new google.maps.MarkerImage("food_icon.png");
      var hotelicon = new google.maps.MarkerImage("hotel_icon.png");
      var sighticon = new google.maps.MarkerImage("sight_icon.png");
      for (var i = 0; i < locations.length; i++) {
                    // 마커에 대한 클로저를 생성
                    (function (i) {
                        var markerIcon = foodicon; // 기본 아이콘을 사용

                        if (locations[i].place === "도토리키친" || locations[i].place === "제주시새우리") {
                            var marker = new google.maps.Marker({
                            position: locations[i].place, 
                            map: map,
                            icon: foodicon
                        });
                        }
                        if(locations[i].place === "도토리키친" || locations[i].place === "제주시새우리") {
                            //음식점아이콘콘
                            markerIcon = new google.maps.MarkerImage("food_icon.png", null, null, null, new google.maps.Size(50, 57));
                        }
                        if(locations[i].place === "여행자게스트하우스" || locations[i].place === "한화리조트제주") {
                            markerIcon = new google.maps.MarkerImage("hotel_icon.png", null, null, null, new google.maps.Size(50, 57));
                        }
                        if(locations[i].place === "오설록티뮤지엄" || locations[i].place === "우도") {
                            markerIcon = new google.maps.MarkerImage("sight_icon.png", null, null, null, new google.maps.Size(50, 57));
                        }
                        var marker = new google.maps.Marker({
                            map: map,
                            position: new google.maps.LatLng(locations[i].lat, locations[i].lng),
                            icon: markerIcon
                        });
                    })(i); // 즉시 실행 함수로 현재의 i 값을 전달
                }
    }

    // 전체 지도 보기 페이지로 이동
    function goToAllMap() {
      window.location.href = 'allmap.html';
    }

    // 초기화
    window.onload = initMap;
  </script>

</body>
</html>
